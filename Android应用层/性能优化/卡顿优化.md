FPS有时帧率很低，但是使用起来并不感觉很卡。

    1.如果1秒中只绘制30帧的需求，或者完全没有绘制，那么FPS甚至会是0.
    2.停止app操作，但是FPS还是会变化，因为屏幕合成一帧是所有针对所有进程的。

由此，导致了无法通过FPS来直观地检测app运行的流畅度。

流畅度分析：

首先，Android系统有着VSync（垂直同步）的机制，可以理解成定时中断，cpu和gpu的处理速度很快，都可以保证在16ms内完成一次绘制，但如果一旦出现cpu和gpu被拖慢的情况，就会导致在16ms内无法绘制完一帧，每次执行都是cpu先执行，执行计算完成后再交给gpu渲染。

流畅度的判断指标：

    1.16ms本该完成一帧的工作，却占用了下n个16ms的时间，就相当于丢了n帧。
    2.和丢帧相对，1秒内VSync机制Loop运行的次数。
        a.1s内有60个Loop，因为某几次工作时间超过了16ms，这样在1s内Loop就无法运行60次了。
        b.流畅度越低，说明当前越卡顿。


了解了流畅度的判断指标，那么接下来开始进入实战部分：

我们首先要来了解一个Android的系统类：choreographer，这个类是用于协调animations、input和drawing的类，说白了，就是输入系统、动画、绘制view的协调机制。

这个类可以注册postFrameCallback回调，会在每一轮Loop之前回调FrameCallback方法，其中FrameCallback的参数是long类型，这里可以计数当前的流畅度，这个数值的单位是 帧/秒，这个值被命名为SM，以便后续的文章书写方便。
[注]：这里的choreographer，是需要在Android 4.1以后才能使用。

经过工程方面的测试得出：

|SM值|卡顿情况|
|---|---|
|SM <= 20|卡死|
|20 < SM <= 40|很卡|
|40 < SM <= 50|较卡|
|50 < SM <= 60|流畅|


卡顿一共分为2种情况：

    1.ui层面：
        ui层次过深
        过度绘制 
    2.数据处理使得主线程处理较慢
        主线程进行耗时计算操作
        子线程太多或者执行的任务进行大量耗时操作，影响主线程获取cpu时间片

